# インフラ構成ルール (Terraform)

今後、別のプロジェクトを生成・管理する際にも適用すべき標準ルールです。

## 1. 秘密情報の分離 (.tfvars の徹底)
プロジェクトごとに異なる設定や、一般公開に適さない秘密情報は必ず `terraform.tfvars` に定義し、コードベース（`.tf`）からは変数参照のみを行います。

### 分離対象
- **AWS設定**: リージョン (`aws_region`)
- **Git連携**: リポジトリURL, パーソナルアクセストークン
- **アプリ秘密鍵**: `NEXTAUTH_SECRET`, 各種APIキー, ログイン用ユーザー名/パスワード
- **DB接続情報**: ホスト, ポート, DB名, ユーザー名, パスワード, スキーマ名

### 運用ルール
- `.gitignore` で `terraform.tfvars` を除外設定とすること。
- 代わりに `terraform.tfvars.example` を配置し、必要な項目を明文化すること。

## 2. コスト最適化 (最小スペック)
個人開発サービスであるため、リソーススペックは常に最小（Free Tier内、または最小課金枠）を選択します。
- **Amplify**: `WEB_COMPUTE` プラットフォームの標準設定。
- **RDS (将来用)**: `db.t4g.micro` などの最小インスタンス、およびシングルAZ構成。

## 3. CI/CD 運用ルール
自動デプロイ (`enable_auto_build = true`) を有効にする場合、ブランチ運用を以下に固定します。
- **対象ブランチ名**: `release`
- 本番環境への反映は、このブランチへのプッシュ/マージをトリガーとします。

## 4. プロバイダー設定
- リージョン情報は変数化し、`terraform.tfvars` から指定可能にすること。
