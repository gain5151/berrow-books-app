# 画面のフォルダ構成ルール (Next.js App Router)

Next.js (App Router) における各画面（ルート）ごとのリソース管理と責務分離を定義するための標準ルールです。

## 1. 基本フォルダ構成
各ルートディレクトリ（`app` 配下の各フォルダ）は、以下の構成を標準とします。

```text
画面フォルダ
  ┣ page.tsx      (画面のメインエントリーポイント)
  ┣ _components/  (画面専用コンポーネント)
  ┣ _actions/     (画面専用 Server Actions)
  ┣ _consts/      (画面専用の定数・型定義)
  ┣ _utils/       (画面専用の純粋関数)
  ┗ _converts/    (画面専用の表示用変換処理)
```

## 2. 各フォルダの詳細定義

### 基本原則
- フォルダには、**その画面（およびその配下のサブディレクトリ）のみで利用するリソース**を配置します。
- 複数の画面を跨いで利用するリソースは、`~/src/components`, `~/src/lib`, `~/src/utils` などの適切な共通ディレクトリに配置してください。

### _components
- この画面専用のカスタムコンポーネントを配置します。
- **原則**: 1つのコンポーネント（1ファイル）に対し1つの責務を持たせます。
- **クライアント/サーバー**: 基本的に `"use client"` とし、UIに関わるロジックをカプセル化します。

### _actions
- この画面に関連する Server Actions を配置します。
- **原則**: 1つのトランザクション（まとまったサーバー処理）につき1つのファイルを割り当てます。
- **クライアント/サーバー**: 必ず `"use server"` を冒頭に記述します。

### _consts
- その画面のみで利用する以下の項目を定義します。
  - `enum` (列挙型)
  - `const` (定義値)
  - `type` / `interface` (型、インターフェース)

### _utils
- 状態を持たない純粋関数（Pure Function）を配置します。
- **要件**: クライアント(`tsx`)からもサーバー(`_actions`)からも呼び出されることを想定し、`"use client"` や `"use server"` は**付けない**でください。

### _converts
- UI表示時に利用する変換処理（Converter）を配置します。
- **原則**: 1つの変換処理につき1つのファイル。
- **例**:
  - 金額の3桁カンマ区切り変換 (`formatCurrency`)
  - 内部コード値から表示用ラベルへのマッピング (`getStatusCodeLabel`)

## 3. 命名規則
- `_` (アンダースコア) で始まるフォルダ名は、Next.js のルーティングから明示的に除外されることを示します。
